<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾å¤¹å·¥å…· - å›¾ç‰‡åŠ å¯†ä¸éšè—åˆ†äº«å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Helvetica Neue", Arial, sans-serif;
        }
        
        body {
            background-color: #f8f0ff;
            color: #333;
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }
        
        .status-bar {
            background-color: #fff;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #666;
            border-bottom: 1px solid #eee;
        }
        
        .status-left, .status-right {
            display: flex;
            align-items: center;
        }
        
        .status-right span {
            margin-left: 10px;
        }
        
        .header {
            background: linear-gradient(135deg, #6a5af9, #d66efd);
            color: white;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(106, 90, 249, 0.3);
        }
        
        .header h1 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px 15px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #6a5af9;
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 8px;
            font-size: 18px;
        }
        
        .upload-area {
            border: 2px dashed #d66efd;
            border-radius: 8px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 15px;
        }
        
        .upload-area:hover {
            background-color: #f9f5ff;
            border-color: #6a5af9;
        }
        
        .upload-area i {
            font-size: 40px;
            color: #d66efd;
            margin-bottom: 10px;
        }
        
        .upload-text {
            font-size: 16px;
            color: #6a5af9;
            margin-bottom: 5px;
        }
        
        .upload-hint {
            font-size: 12px;
            color: #999;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            margin-top: 10px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 6px;
        }
        
        .file-icon {
            width: 40px;
            height: 40px;
            background-color: #d66efd;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            margin-right: 10px;
        }
        
        .file-details {
            flex: 1;
        }
        
        .file-name {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .file-size {
            font-size: 12px;
            color: #999;
        }
        
        .remove-file {
            background: none;
            border: none;
            color: #ff4757;
            font-size: 18px;
            cursor: pointer;
        }
        
        .algorithm-select {
            display: flex;
            margin-bottom: 20px;
        }
        
        .algorithm-option {
            flex: 1;
            text-align: center;
            padding: 12px 5px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .algorithm-option:first-child {
            border-radius: 6px 0 0 6px;
            border-right: none;
        }
        
        .algorithm-option:last-child {
            border-radius: 0 6px 6px 0;
        }
        
        .algorithm-option.selected {
            background-color: #6a5af9;
            color: white;
            border-color: #6a5af9;
        }
        
        .algorithm-name {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .algorithm-desc {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .watermark-section {
            margin-bottom: 20px;
        }
        
        .watermark-label {
            display: block;
            font-size: 14px;
            margin-bottom: 8px;
            color: #666;
        }
        
        .watermark-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .action-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #6a5af9, #d66efd);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 90, 249, 0.4);
        }
        
        .result-section {
            margin-top: 20px;
            display: none;
        }
        
        .result-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #6a5af9;
            display: flex;
            align-items: center;
        }
        
        .result-image {
            width: 100%;
            max-width: 200px;
            margin: 0 auto 15px;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .result-actions {
            display: flex;
            gap: 10px;
        }
        
        .result-btn {
            flex: 1;
            padding: 10px;
            background: #f1f1f1;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .result-btn.primary {
            background: #6a5af9;
            color: white;
        }
        
        .result-btn:hover {
            background: #e0e0e0;
        }
        
        .result-btn.primary:hover {
            background: #5a4ae9;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #999;
            font-size: 12px;
        }
        
        .hidden {
            display: none;
        }
        
        .tab-container {
            display: flex;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #6a5af9, #d66efd);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- çŠ¶æ€æ  -->
    <div class="status-bar">
        <div class="status-left">10:57</div>
        <div class="status-right">
            <span>4G</span>
            <span>38%</span>
        </div>
    </div>
    
    <!-- å¤´éƒ¨ -->
    <div class="header">
        <h1>å›¾å¤¹å·¥å…· - å›¾ç‰‡åŠ å¯†ä¸éšè—åˆ†äº«å·¥å…·</h1>
        <p>å®‰å…¨éšè—æ–‡ä»¶åˆ°å›¾ç‰‡ä¸­</p>
    </div>
    
    <!-- æ ‡ç­¾é¡µ -->
    <div class="container">
        <div class="tab-container">
            <div class="tab" data-tab="unpack">å›¾ç‰‡è§£åŒ…</div>
            <div class="tab active" data-tab="pack">å›¾ç‰‡æ‰“åŒ…</div>
        </div>
        
        <!-- å›¾ç‰‡æ‰“åŒ…å†…å®¹ -->
        <div class="tab-content active" id="pack-tab">
            <!-- è¡¨å›¾é€‰æ‹© -->
            <div class="card">
                <div class="card-title">è¡¨å›¾é€‰æ‹©</div>
                <div class="upload-area" id="cover-upload">
                    <i>ğŸ“·</i>
                    <div class="upload-text">è‡ªå®šä¹‰ä¸Šä¼ </div>
                    <div class="upload-hint">ç‚¹å‡»é€‰æ‹©å›¾ç‰‡æ–‡ä»¶</div>
                </div>
                <div class="file-info hidden" id="cover-info">
                    <div class="file-icon">ğŸ–¼ï¸</div>
                    <div class="file-details">
                        <div class="file-name" id="cover-name">cover.jpg</div>
                        <div class="file-size" id="cover-size">2.1 MB</div>
                    </div>
                    <button class="remove-file" id="remove-cover">Ã—</button>
                </div>
            </div>
            
            <!-- é‡Œå›¾é€‰æ‹© -->
            <div class="card">
                <div class="card-title">é€‰æ‹©éšè—æ–‡ä»¶</div>
                <div class="upload-area" id="file-upload">
                    <i>ğŸ“</i>
                    <div class="upload-text">é€‰æ‹©éšè—æ–‡ä»¶</div>
                    <div class="upload-hint">ç‚¹å‡»é€‰æ‹©è¦éšè—çš„æ–‡ä»¶</div>
                </div>
                <div class="file-info hidden" id="file-info">
                    <div class="file-icon">ğŸ“„</div>
                    <div class="file-details">
                        <div class="file-name" id="file-name">secret.txt</div>
                        <div class="file-size" id="file-size">15 KB</div>
                    </div>
                    <button class="remove-file" id="remove-file">Ã—</button>
                </div>
            </div>
            
            <!-- ç®—æ³•é€‰æ‹© -->
            <div class="card">
                <div class="card-title">ç®—æ³•é€‰æ‹©</div>
                <div class="algorithm-select">
                    <div class="algorithm-option selected" data-algo="dynamic">
                        <div class="algorithm-name">åŠ¨æ€æ··æ·†ï¼ˆæé€Ÿï¼‰</div>
                        <div class="algorithm-desc">å¿«é€Ÿéšè—æ–‡ä»¶</div>
                    </div>
                    <div class="algorithm-option" data-algo="pro">
                        <div class="algorithm-name">å›¾å¤¹PROï¼ˆé˜²æ£€æµ‹ï¼‰</div>
                        <div class="algorithm-desc">é«˜çº§éšè—æŠ€æœ¯</div>
                    </div>
                </div>
                
                <!-- æ°´å°è®¾ç½® -->
                <div class="watermark-section">
                    <label class="watermark-label">æ°´å°:</label>
                    <input type="text" class="watermark-input" value="å›¾å¤¹" placeholder="è¾“å…¥æ°´å°å†…å®¹">
                </div>
            </div>
            
            <!-- åˆ¶ä½œå›¾å¤¹æŒ‰é’® -->
            <button class="action-btn" id="create-btn">åˆ¶ä½œå›¾å¤¹</button>
            
            <!-- æ‰“åŒ…ç»“æœ -->
            <div class="card result-section" id="result-section">
                <div class="result-title">æ‰“åŒ…ç»“æœ</div>
                <img src="" alt="ç»“æœå›¾ç‰‡" class="result-image" id="result-image">
                <div class="result-actions">
                    <button class="result-btn" id="save-btn">ä¿å­˜å›¾ç‰‡</button>
                    <button class="result-btn primary" id="share-btn">åˆ†äº«</button>
                </div>
            </div>
        </div>
        
        <!-- å›¾ç‰‡è§£åŒ…å†…å®¹ -->
        <div class="tab-content" id="unpack-tab">
            <div class="card">
                <div class="card-title">é€‰æ‹©å›¾å¤¹å›¾ç‰‡</div>
                <div class="upload-area" id="stego-upload">
                    <i>ğŸ–¼ï¸</i>
                    <div class="upload-text">é€‰æ‹©å›¾å¤¹å›¾ç‰‡</div>
                    <div class="upload-hint">ç‚¹å‡»é€‰æ‹©åŒ…å«éšè—æ–‡ä»¶çš„å›¾ç‰‡</div>
                </div>
                <div class="file-info hidden" id="stego-info">
                    <div class="file-icon">ğŸ”</div>
                    <div class="file-details">
                        <div class="file-name" id="stego-name">stego.png</div>
                        <div class="file-size" id="stego-size">2.3 MB</div>
                    </div>
                    <button class="remove-file" id="remove-stego">Ã—</button>
                </div>
                
                <div class="watermark-section">
                    <label class="watermark-label">æ°´å°éªŒè¯:</label>
                    <input type="text" class="watermark-input" placeholder="è¾“å…¥æ°´å°è¿›è¡ŒéªŒè¯ï¼ˆå¯é€‰ï¼‰">
                </div>
                
                <button class="action-btn" id="extract-btn">æå–æ–‡ä»¶</button>
                
                <div class="result-section hidden" id="extract-result">
                    <div class="result-title">æå–ç»“æœ</div>
                    <div class="file-info">
                        <div class="file-icon">ğŸ“„</div>
                        <div class="file-details">
                            <div class="file-name" id="extracted-name">secret.txt</div>
                            <div class="file-size" id="extracted-size">15 KB</div>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button class="result-btn primary" id="download-btn">ä¸‹è½½æ–‡ä»¶</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- é¡µè„š -->
    <div class="footer">
        <p>å›¾å¤¹å·¥å…· v1.0 | å®‰å…¨åŠ å¯†éšè—æŠ€æœ¯</p>
    </div>

    <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
    <input type="file" id="cover-input" accept="image/*" class="hidden">
    <input type="file" id="file-input" class="hidden">
    <input type="file" id="stego-input" accept="image/*" class="hidden">

    <script>
        // DOMå…ƒç´ 
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const coverUpload = document.getElementById('cover-upload');
        const fileUpload = document.getElementById('file-upload');
        const stegoUpload = document.getElementById('stego-upload');
        const coverInput = document.getElementById('cover-input');
        const fileInput = document.getElementById('file-input');
        const stegoInput = document.getElementById('stego-input');
        const coverInfo = document.getElementById('cover-info');
        const fileInfo = document.getElementById('file-info');
        const stegoInfo = document.getElementById('stego-info');
        const createBtn = document.getElementById('create-btn');
        const extractBtn = document.getElementById('extract-btn');
        const resultSection = document.getElementById('result-section');
        const extractResult = document.getElementById('extract-result');
        const algorithmOptions = document.querySelectorAll('.algorithm-option');
        
        // å…¨å±€å˜é‡
        let selectedAlgorithm = 'dynamic';
        let coverFile = null;
        let secretFile = null;
        let stegoFile = null;
        
        // æ ‡ç­¾é¡µåˆ‡æ¢
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // æ›´æ–°æ´»åŠ¨æ ‡ç­¾
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // æ˜¾ç¤ºå¯¹åº”å†…å®¹
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    }
                });
            });
        });
        
        // ç®—æ³•é€‰æ‹©
        algorithmOptions.forEach(option => {
            option.addEventListener('click', () => {
                algorithmOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedAlgorithm = option.getAttribute('data-algo');
            });
        });
        
        // ä¸Šä¼ åŒºåŸŸç‚¹å‡»äº‹ä»¶
        coverUpload.addEventListener('click', () => coverInput.click());
        fileUpload.addEventListener('click', () => fileInput.click());
        stegoUpload.addEventListener('click', () => stegoInput.click());
        
        // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
        coverInput.addEventListener('change', handleCoverSelect);
        fileInput.addEventListener('change', handleFileSelect);
        stegoInput.addEventListener('change', handleStegoSelect);
        
        // ç§»é™¤æ–‡ä»¶äº‹ä»¶
        document.getElementById('remove-cover').addEventListener('click', () => {
            coverInfo.classList.add('hidden');
            coverFile = null;
            coverInput.value = '';
        });
        
        document.getElementById('remove-file').addEventListener('click', () => {
            fileInfo.classList.add('hidden');
            secretFile = null;
            fileInput.value = '';
        });
        
        document.getElementById('remove-stego').addEventListener('click', () => {
            stegoInfo.classList.add('hidden');
            stegoFile = null;
            stegoInput.value = '';
            extractResult.classList.add('hidden');
        });
        
        // å¤„ç†å°é¢å›¾ç‰‡é€‰æ‹©
        function handleCoverSelect(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼');
                return;
            }
            
            coverFile = file;
            document.getElementById('cover-name').textContent = file.name;
            document.getElementById('cover-size').textContent = formatFileSize(file.size);
            coverInfo.classList.remove('hidden');
        }
        
        // å¤„ç†éšè—æ–‡ä»¶é€‰æ‹©
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            secretFile = file;
            document.getElementById('file-name').textContent = file.name;
            document.getElementById('file-size').textContent = formatFileSize(file.size);
            fileInfo.classList.remove('hidden');
        }
        
        // å¤„ç†å›¾å¤¹å›¾ç‰‡é€‰æ‹©
        function handleStegoSelect(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼');
                return;
            }
            
            stegoFile = file;
            document.getElementById('stego-name').textContent = file.name;
            document.getElementById('stego-size').textContent = formatFileSize(file.size);
            stegoInfo.classList.remove('hidden');
            extractResult.classList.add('hidden');
        }
        
        // åˆ¶ä½œå›¾å¤¹æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        createBtn.addEventListener('click', () => {
            if (!coverFile) {
                alert('è¯·é€‰æ‹©å°é¢å›¾ç‰‡ï¼');
                return;
            }
            
            if (!secretFile) {
                alert('è¯·é€‰æ‹©è¦éšè—çš„æ–‡ä»¶ï¼');
                return;
            }
            
            // æ¨¡æ‹Ÿå¤„ç†è¿‡ç¨‹
            createBtn.textContent = 'å¤„ç†ä¸­...';
            createBtn.disabled = true;
            
            setTimeout(() => {
                // åˆ›å»ºCanvaså¤„ç†å›¾ç‰‡
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    
                    // æ¨¡æ‹Ÿæ·»åŠ æ°´å°
                    const watermark = document.querySelector('.watermark-input').value || 'å›¾å¤¹';
                    ctx.font = '20px Arial';
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                    ctx.fillText(watermark, 10, 30);
                    
                    // æ˜¾ç¤ºç»“æœ
                    const resultImage = document.getElementById('result-image');
                    resultImage.src = canvas.toDataURL();
                    resultSection.style.display = 'block';
                    
                    createBtn.textContent = 'åˆ¶ä½œå›¾å¤¹';
                    createBtn.disabled = false;
                    
                    // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                    resultSection.scrollIntoView({ behavior: 'smooth' });
                };
                
                img.src = URL.createObjectURL(coverFile);
            }, 1500);
        });
        
        // æå–æ–‡ä»¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        extractBtn.addEventListener('click', () => {
            if (!stegoFile) {
                alert('è¯·é€‰æ‹©å›¾å¤¹å›¾ç‰‡ï¼');
                return;
            }
            
            // æ¨¡æ‹Ÿæå–è¿‡ç¨‹
            extractBtn.textContent = 'æå–ä¸­...';
            extractBtn.disabled = true;
            
            setTimeout(() => {
                // æ˜¾ç¤ºæå–ç»“æœ
                document.getElementById('extracted-name').textContent = 'éšè—æ–‡ä»¶.txt';
                document.getElementById('extracted-size').textContent = '15 KB';
                extractResult.classList.remove('hidden');
                
                extractBtn.textContent = 'æå–æ–‡ä»¶';
                extractBtn.disabled = false;
                
                // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                extractResult.scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        });
        
        // ä¿å­˜å›¾ç‰‡æŒ‰é’®
        document.getElementById('save-btn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'å›¾å¤¹å›¾ç‰‡.png';
            link.href = document.getElementById('result-image').src;
            link.click();
        });
        
        // åˆ†äº«æŒ‰é’®
        document.getElementById('share-btn').addEventListener('click', () => {
            alert('åˆ†äº«åŠŸèƒ½éœ€è¦åœ¨å®é™…åº”ç”¨ä¸­å®ç°ï¼');
        });
        
        // ä¸‹è½½æ–‡ä»¶æŒ‰é’®
        document.getElementById('download-btn').addEventListener('click', () => {
            // åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶å¹¶ä¸‹è½½
            const content = 'è¿™æ˜¯ä¸€ä¸ªä»å›¾å¤¹å›¾ç‰‡ä¸­æå–çš„éšè—æ–‡ä»¶ç¤ºä¾‹ã€‚';
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.download = 'éšè—æ–‡ä»¶.txt';
            link.href = url;
            link.click();
            URL.revokeObjectURL(url);
        });
        
        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
