<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图夹工具 - 图片加密与隐藏分享工具</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Helvetica Neue", Arial, sans-serif;
        }
        
        body {
            background-color: #f8f0ff;
            color: #333;
            line-height: 1.6;
            padding: 0;
            margin: 0;
        }
        
        .status-bar {
            background-color: #fff;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #666;
            border-bottom: 1px solid #eee;
        }
        
        .status-left, .status-right {
            display: flex;
            align-items: center;
        }
        
        .status-right span {
            margin-left: 10px;
        }
        
        .header {
            background: linear-gradient(135deg, #6a5af9, #d66efd);
            color: white;
            padding: 20px 15px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(106, 90, 249, 0.3);
        }
        
        .header h1 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px 15px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #6a5af9;
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 8px;
            font-size: 18px;
        }
        
        .upload-area {
            border: 2px dashed #d66efd;
            border-radius: 8px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 15px;
        }
        
        .upload-area:hover {
            background-color: #f9f5ff;
            border-color: #6a5af9;
        }
        
        .upload-area i {
            font-size: 40px;
            color: #d66efd;
            margin-bottom: 10px;
        }
        
        .upload-text {
            font-size: 16px;
            color: #6a5af9;
            margin-bottom: 5px;
        }
        
        .upload-hint {
            font-size: 12px;
            color: #999;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            margin-top: 10px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 6px;
        }
        
        .file-icon {
            width: 40px;
            height: 40px;
            background-color: #d66efd;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            margin-right: 10px;
        }
        
        .file-details {
            flex: 1;
        }
        
        .file-name {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .file-size {
            font-size: 12px;
            color: #999;
        }
        
        .remove-file {
            background: none;
            border: none;
            color: #ff4757;
            font-size: 18px;
            cursor: pointer;
        }
        
        .algorithm-select {
            display: flex;
            margin-bottom: 20px;
        }
        
        .algorithm-option {
            flex: 1;
            text-align: center;
            padding: 12px 5px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .algorithm-option:first-child {
            border-radius: 6px 0 0 6px;
            border-right: none;
        }
        
        .algorithm-option:last-child {
            border-radius: 0 6px 6px 0;
        }
        
        .algorithm-option.selected {
            background-color: #6a5af9;
            color: white;
            border-color: #6a5af9;
        }
        
        .algorithm-name {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 3px;
        }
        
        .algorithm-desc {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .watermark-section {
            margin-bottom: 20px;
        }
        
        .watermark-label {
            display: block;
            font-size: 14px;
            margin-bottom: 8px;
            color: #666;
        }
        
        .watermark-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .action-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #6a5af9, #d66efd);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 90, 249, 0.4);
        }
        
        .result-section {
            margin-top: 20px;
            display: none;
        }
        
        .result-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #6a5af9;
            display: flex;
            align-items: center;
        }
        
        .result-image {
            width: 100%;
            max-width: 200px;
            margin: 0 auto 15px;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .result-actions {
            display: flex;
            gap: 10px;
        }
        
        .result-btn {
            flex: 1;
            padding: 10px;
            background: #f1f1f1;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .result-btn.primary {
            background: #6a5af9;
            color: white;
        }
        
        .result-btn:hover {
            background: #e0e0e0;
        }
        
        .result-btn.primary:hover {
            background: #5a4ae9;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #999;
            font-size: 12px;
        }
        
        .hidden {
            display: none;
        }
        
        .tab-container {
            display: flex;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #6a5af9, #d66efd);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- 状态栏 -->
    <div class="status-bar">
        <div class="status-left">10:57</div>
        <div class="status-right">
            <span>4G</span>
            <span>38%</span>
        </div>
    </div>
    
    <!-- 头部 -->
    <div class="header">
        <h1>图夹工具 - 图片加密与隐藏分享工具</h1>
        <p>安全隐藏文件到图片中</p>
    </div>
    
    <!-- 标签页 -->
    <div class="container">
        <div class="tab-container">
            <div class="tab" data-tab="unpack">图片解包</div>
            <div class="tab active" data-tab="pack">图片打包</div>
        </div>
        
        <!-- 图片打包内容 -->
        <div class="tab-content active" id="pack-tab">
            <!-- 表图选择 -->
            <div class="card">
                <div class="card-title">表图选择</div>
                <div class="upload-area" id="cover-upload">
                    <i>📷</i>
                    <div class="upload-text">自定义上传</div>
                    <div class="upload-hint">点击选择图片文件</div>
                </div>
                <div class="file-info hidden" id="cover-info">
                    <div class="file-icon">🖼️</div>
                    <div class="file-details">
                        <div class="file-name" id="cover-name">cover.jpg</div>
                        <div class="file-size" id="cover-size">2.1 MB</div>
                    </div>
                    <button class="remove-file" id="remove-cover">×</button>
                </div>
            </div>
            
            <!-- 里图选择 -->
            <div class="card">
                <div class="card-title">选择隐藏文件</div>
                <div class="upload-area" id="file-upload">
                    <i>📁</i>
                    <div class="upload-text">选择隐藏文件</div>
                    <div class="upload-hint">点击选择要隐藏的文件</div>
                </div>
                <div class="file-info hidden" id="file-info">
                    <div class="file-icon">📄</div>
                    <div class="file-details">
                        <div class="file-name" id="file-name">secret.txt</div>
                        <div class="file-size" id="file-size">15 KB</div>
                    </div>
                    <button class="remove-file" id="remove-file">×</button>
                </div>
            </div>
            
            <!-- 算法选择 -->
            <div class="card">
                <div class="card-title">算法选择</div>
                <div class="algorithm-select">
                    <div class="algorithm-option selected" data-algo="dynamic">
                        <div class="algorithm-name">动态混淆（极速）</div>
                        <div class="algorithm-desc">快速隐藏文件</div>
                    </div>
                    <div class="algorithm-option" data-algo="pro">
                        <div class="algorithm-name">图夹PRO（防检测）</div>
                        <div class="algorithm-desc">高级隐藏技术</div>
                    </div>
                </div>
                
                <!-- 水印设置 -->
                <div class="watermark-section">
                    <label class="watermark-label">水印:</label>
                    <input type="text" class="watermark-input" value="图夹" placeholder="输入水印内容">
                </div>
            </div>
            
            <!-- 制作图夹按钮 -->
            <button class="action-btn" id="create-btn">制作图夹</button>
            
            <!-- 打包结果 -->
            <div class="card result-section" id="result-section">
                <div class="result-title">打包结果</div>
                <img src="" alt="结果图片" class="result-image" id="result-image">
                <div class="result-actions">
                    <button class="result-btn" id="save-btn">保存图片</button>
                    <button class="result-btn primary" id="share-btn">分享</button>
                </div>
            </div>
        </div>
        
        <!-- 图片解包内容 -->
        <div class="tab-content" id="unpack-tab">
            <div class="card">
                <div class="card-title">选择图夹图片</div>
                <div class="upload-area" id="stego-upload">
                    <i>🖼️</i>
                    <div class="upload-text">选择图夹图片</div>
                    <div class="upload-hint">点击选择包含隐藏文件的图片</div>
                </div>
                <div class="file-info hidden" id="stego-info">
                    <div class="file-icon">🔍</div>
                    <div class="file-details">
                        <div class="file-name" id="stego-name">stego.png</div>
                        <div class="file-size" id="stego-size">2.3 MB</div>
                    </div>
                    <button class="remove-file" id="remove-stego">×</button>
                </div>
                
                <div class="watermark-section">
                    <label class="watermark-label">水印验证:</label>
                    <input type="text" class="watermark-input" placeholder="输入水印进行验证（可选）">
                </div>
                
                <button class="action-btn" id="extract-btn">提取文件</button>
                
                <div class="result-section hidden" id="extract-result">
                    <div class="result-title">提取结果</div>
                    <div class="file-info">
                        <div class="file-icon">📄</div>
                        <div class="file-details">
                            <div class="file-name" id="extracted-name">secret.txt</div>
                            <div class="file-size" id="extracted-size">15 KB</div>
                        </div>
                    </div>
                    <div class="result-actions">
                        <button class="result-btn primary" id="download-btn">下载文件</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 页脚 -->
    <div class="footer">
        <p>图夹工具 v1.0 | 安全加密隐藏技术</p>
    </div>

    <!-- 隐藏的文件输入 -->
    <input type="file" id="cover-input" accept="image/*" class="hidden">
    <input type="file" id="file-input" class="hidden">
    <input type="file" id="stego-input" accept="image/*" class="hidden">

    <script>
        // DOM元素
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const coverUpload = document.getElementById('cover-upload');
        const fileUpload = document.getElementById('file-upload');
        const stegoUpload = document.getElementById('stego-upload');
        const coverInput = document.getElementById('cover-input');
        const fileInput = document.getElementById('file-input');
        const stegoInput = document.getElementById('stego-input');
        const coverInfo = document.getElementById('cover-info');
        const fileInfo = document.getElementById('file-info');
        const stegoInfo = document.getElementById('stego-info');
        const createBtn = document.getElementById('create-btn');
        const extractBtn = document.getElementById('extract-btn');
        const resultSection = document.getElementById('result-section');
        const extractResult = document.getElementById('extract-result');
        const algorithmOptions = document.querySelectorAll('.algorithm-option');
        
        // 全局变量
        let selectedAlgorithm = 'dynamic';
        let coverFile = null;
        let secretFile = null;
        let stegoFile = null;
        
        // 标签页切换
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // 更新活动标签
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // 显示对应内容
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    }
                });
            });
        });
        
        // 算法选择
        algorithmOptions.forEach(option => {
            option.addEventListener('click', () => {
                algorithmOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                selectedAlgorithm = option.getAttribute('data-algo');
            });
        });
        
        // 上传区域点击事件
        coverUpload.addEventListener('click', () => coverInput.click());
        fileUpload.addEventListener('click', () => fileInput.click());
        stegoUpload.addEventListener('click', () => stegoInput.click());
        
        // 文件选择事件
        coverInput.addEventListener('change', handleCoverSelect);
        fileInput.addEventListener('change', handleFileSelect);
        stegoInput.addEventListener('change', handleStegoSelect);
        
        // 移除文件事件
        document.getElementById('remove-cover').addEventListener('click', () => {
            coverInfo.classList.add('hidden');
            coverFile = null;
            coverInput.value = '';
        });
        
        document.getElementById('remove-file').addEventListener('click', () => {
            fileInfo.classList.add('hidden');
            secretFile = null;
            fileInput.value = '';
        });
        
        document.getElementById('remove-stego').addEventListener('click', () => {
            stegoInfo.classList.add('hidden');
            stegoFile = null;
            stegoInput.value = '';
            extractResult.classList.add('hidden');
        });
        
        // 处理封面图片选择
        function handleCoverSelect(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                alert('请选择图片文件！');
                return;
            }
            
            coverFile = file;
            document.getElementById('cover-name').textContent = file.name;
            document.getElementById('cover-size').textContent = formatFileSize(file.size);
            coverInfo.classList.remove('hidden');
        }
        
        // 处理隐藏文件选择
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            secretFile = file;
            document.getElementById('file-name').textContent = file.name;
            document.getElementById('file-size').textContent = formatFileSize(file.size);
            fileInfo.classList.remove('hidden');
        }
        
        // 处理图夹图片选择
        function handleStegoSelect(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                alert('请选择图片文件！');
                return;
            }
            
            stegoFile = file;
            document.getElementById('stego-name').textContent = file.name;
            document.getElementById('stego-size').textContent = formatFileSize(file.size);
            stegoInfo.classList.remove('hidden');
            extractResult.classList.add('hidden');
        }
        
        // 制作图夹按钮点击事件
        createBtn.addEventListener('click', () => {
            if (!coverFile) {
                alert('请选择封面图片！');
                return;
            }
            
            if (!secretFile) {
                alert('请选择要隐藏的文件！');
                return;
            }
            
            // 模拟处理过程
            createBtn.textContent = '处理中...';
            createBtn.disabled = true;
            
            setTimeout(() => {
                // 创建Canvas处理图片
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();
                
                img.onload = function() {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    
                    // 模拟添加水印
                    const watermark = document.querySelector('.watermark-input').value || '图夹';
                    ctx.font = '20px Arial';
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                    ctx.fillText(watermark, 10, 30);
                    
                    // 显示结果
                    const resultImage = document.getElementById('result-image');
                    resultImage.src = canvas.toDataURL();
                    resultSection.style.display = 'block';
                    
                    createBtn.textContent = '制作图夹';
                    createBtn.disabled = false;
                    
                    // 滚动到结果区域
                    resultSection.scrollIntoView({ behavior: 'smooth' });
                };
                
                img.src = URL.createObjectURL(coverFile);
            }, 1500);
        });
        
        // 提取文件按钮点击事件
        extractBtn.addEventListener('click', () => {
            if (!stegoFile) {
                alert('请选择图夹图片！');
                return;
            }
            
            // 模拟提取过程
            extractBtn.textContent = '提取中...';
            extractBtn.disabled = true;
            
            setTimeout(() => {
                // 显示提取结果
                document.getElementById('extracted-name').textContent = '隐藏文件.txt';
                document.getElementById('extracted-size').textContent = '15 KB';
                extractResult.classList.remove('hidden');
                
                extractBtn.textContent = '提取文件';
                extractBtn.disabled = false;
                
                // 滚动到结果区域
                extractResult.scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        });
        
        // 保存图片按钮
        document.getElementById('save-btn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = '图夹图片.png';
            link.href = document.getElementById('result-image').src;
            link.click();
        });
        
        // 分享按钮
        document.getElementById('share-btn').addEventListener('click', () => {
            alert('分享功能需要在实际应用中实现！');
        });
        
        // 下载文件按钮
        document.getElementById('download-btn').addEventListener('click', () => {
            // 创建一个虚拟文件并下载
            const content = '这是一个从图夹图片中提取的隐藏文件示例。';
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.download = '隐藏文件.txt';
            link.href = url;
            link.click();
            URL.revokeObjectURL(url);
        });
        
        // 格式化文件大小
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
